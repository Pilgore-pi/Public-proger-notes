**API (Application Programming Interface)** — это программный интерфейс, набор правил и протоколов, позволяющий различным программам взаимодействовать друг с другом. Он определяет методы и структуры данных, которые могут быть использованы для обмена информацией и выполнения операций между различными программами или компонентами программного обеспечения

Другими словами, API — это некоторый стандарт (контракт) взаимодействия двух программ. Все участники API могут использовать только доступные в контракте функции, что позволяет сохранить предсказуемость работы программ и целостность передаваемых данных

Web API имеют **эндпоинты (endpoints)** — точки соприкосновения клиента и сервера. Endpoint-ы состоят из URL-адреса и используемого метода HTTP

#### Спецификации API

> **Спецификация API** — это формализованное описание интерфейса программного обеспечения, которое определяет, как различные компоненты системы могут взаимодействовать друг с другом
 
Спецификация содержит следующую информацию:

- Эндпоинты (endpoints)
- Методы API (например, `GET`, `POST`)
- Параметры запросов
- Форматы ответов
- Механизмы безопасности
 
- Спецификации API, такие как [OpenAPI](https://www.openapis.org/), позволяют разработчикам понять функциональность API без необходимости изучать его исходный код или документацию

- Даже, если требуется наличие документации, она может быть сгенерирована на основе спецификации с помощью специальных сервисов

- Спецификации упрощают тестирование API, так как четко описывают ожидаемые входные и выходные данные

##### Процесс создания спецификации API

1. **Выбор формата**: Спецификации могут быть написаны в различных форматах, включая YAML и JSON. YAML часто используется благодаря своей читаемости, но JSON также является популярным вариантом.

2. **Использование инструментов**: Для создания спецификаций можно использовать инструменты, такие как [Swagger](https://swagger.io/) или [Postman](https://www.postman.com/). Эти инструменты позволяют автоматически генерировать спецификации на основе существующего кода или перехваченных запросов и ответов API

3. **Структура спецификации**: Спецификация обычно включает следующие разделы:
    - **openapi**: версия спецификации
    - **info**: информация о API (название, версия, описание)
    - **servers**: список серверов, на которых доступен API
    - **paths**: конечные точки и методы
    - **components**: переиспользуемые объекты (схемы, ответы и т.д.)

4. **Документация и тестирование**: После создания спецификации она может быть использована для генерации документации и клиентского кода, а также для тестирования API.

Наиболее распространенным стандартом составления спецификаций API является **OAS** (OpenAPI Specification), который предоставляет структурированный и удобочитаемый формат для описания RESTful API

#### Преимущества использования API

- **Модульность**. API позволяет делать приложения модульными и применять микросервисную архитектуру, делая приложение более **гибким** и **расширяемым**. Каждый модуль приложения представляет собой независимую часть, которая может взаимодействовать с другими частами по некоторым общеустановленным правилам (API). Модульность позволяет упростить разработку, четко разделив обязанности по разработке. Также модульность позволяет абстрагироваться от особенностей реализации модуля и сконцентрироваться только на том, **какие операции можно производить над модулем**.

- **Использование готовых приложений**. API позволяет подключиться к любому приложению (которое его поддерживает) с нужным функционалом. Если не использовать API, придется копировать весь функционал приложения (если приложение с открытым кодом) или, вообще, повторять функционал с нуля.

- **Огромное ускорение разработки**. Вместо проектирования, разработки и тестирования приложения с нужным функционалом можно использовать уже готовые решения через API

- **Облегчение взаимодействия информационных систем**. Например WinApi предоставляет интерфейс для использования любыми приложениями, что позволяет управлять уведомлениями ОС Windows, менять внешний вид системы, управлять запуском приложений и так далее.

- **Безопасность**. Современные API обеспечивают надежный уровень защиты при передаче данных между приложениями

- **Легкость использования сторонних серисов** через API, так как можно не задумываясь от внутреннего устройства стороннего приложения просто перейти от использования одного приложения к другому приложению.

#### Недостатки применения API

- **Зависимость от сторонних сервисов**
    - *Ликвидация сервиса*. Если сервис будет ликвидирован, то приложение, использующее сервис, будет ограничено в своем функционале или вовсе перестанет работать.
    - *Платное использование*. Также владелец сервиса может изменить условия пользования, например введя платные подписки.
    - *Изменение законодательства*. Изменения в законодательстве могут, в какой-то момент, запретить использование того или иного API. Например, в РФ запрещена авторизация через Google аккаунты, а со стороны западных стран блокируются российские адреса, что не позволяет использовать многие иностранные сервисы, такие как ChatGPT API от OpenAI

- **Проблемы с производительностью**: Вызовы к удаленным API могут замедлять работу приложения из-за сетевых задержек или ограничений по скорости обработки запросов

- **Ограниченный контроль над функциональностью**: При использовании сторонних API разработчики ограничены функциональностью, предоставляемой этими интерфейсами, что может ограничить возможности кастомизации

- **Обновления и изменения в API**: Изменения в стороннем API могут потребовать доработки приложения, чтобы поддерживать совместимость, что может потребовать дополнительных ресурсов. Однако радикальные изменения, вынуждающие изменять логику взаимодействия с сервисом, совершаются не часто.

- **Безопасность данных**: Передача данных через API может подвергать их риску утечек или атак, особенно если не используются адекватные меры безопасности. Кроме того, владелец сервиса может использовать полученные данные злонамеренно — например, продавать личные данные пользователей для таргетированной рекламы.

> Среды разработки (IDE) — это почти API, единственным, но ключевым отличием от API является то, что среда разработки — это интерфейс взаимодействия между компьютером и человеком.

В некоторых случаях, IDE выступают в роли полноценного программного интерфейса. Например при разработке графического интерфейса на C# Windows Forms, генерируется код C#, который описывает поведение графических элементов. В данном случае Windows Forms повышает уровень абстракции программирования для человека. Человек просто "говорит", что он хочет видеть, а WinForms генерирует код C# за него.

#### [[02 Протоколы передачи данных|Протоколы передачи данных]]

Ниже приведены технологии передачи данных, которые могут быть задействованы при передаче информации между двумя информационными системами через API

| Технология                                        |                                                                                                                                               |
| ------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------- |
| Протокол TCP                                      | Сетевой протокол                                                                                                                              |
| Протокол FTP                                      |                                                                                                                                               |
| GraphQL                                           |                                                                                                                                               |
| WebSocket                                         |                                                                                                                                               |
| RPC (Remote Procedure Call)                       |                                                                                                                                               |
| *[[05 Component Object Model (COM)\|COM-интерфейс]]* | Не является протоколом, позволяет взаимодействовать приложениям, разработанных на разных языках программирования. Работает только для Windows |

Данные могут передаваться в различных форматах

| Формат передачи данных | Описание                                                                                                              |
| ---------------------- | --------------------------------------------------------------------------------------------------------------------- |
| JSON                   | Формат объекта языка JavaScript                                                                                       |
| XML                    | XML документ, позволяющий описывать обхекты и их свойства                                                             |
| HTML                   | HTML документ. Может содержать в себе файлы и объекты в других форматах                                               |
| YAML                   | Удобочитаемый формат YAML                                                                                             |
| Текст                  | Текстовые данные различных форматов                                                                                   |
| Бинарные данные        | Массивы байт                                                                                                          |
| Закодированные данные  | позволяют сократить объем передаваемых данных, но могут уведичить время обработки за счет кодирования и декодирования |
| Специальные форматы    | Различные технологии передачи данных могут использовать свои форматы                                                  |

#API #COM #JSON #XML #HTML #RPC