
Существует недостаток в стандартах .Net. Объявляемые классы по умолчанию открыты для наследования. Это плохая практика, так как существуют значительные различия в производительности. И в целом, зачем объявлять класс открытым, если не предполагается наследование?

Предположим объявлены 2 класса, наследующие класс BaseClass. Один — открытый, другой — запечатанный. Например, один и тот же пустой void метод в обоих классах будет выполняться с разной скоростью.

>Запечатанные классы не подвергаются проверке на ковариантность, что увеличивает производительность.

| OpenClass | SealedClass | Сущность кода    | Комментарии                                               |
| --------- | ----------- | ---------------- | --------------------------------------------------------- |
| 0.2300 ns | 0.0060 ns   | void method      | пустой метод                                              |
| 0.8450 ns | 0.0008 ns   | int method       | возврат литерала                                          |
| 1.6380 ns | 0.1635 ns   | bool method      | `"baseClass is OpenClass"` / `"baseClass is SealedClass"` |
| 0.2300 ns | 0.0300 ns   | `Span<T>` method | возврат диапазона соответсвующих классов                  |

 #Dotnet #Performance