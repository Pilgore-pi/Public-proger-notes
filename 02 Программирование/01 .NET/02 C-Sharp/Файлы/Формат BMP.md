Формат `.bmp` — изображение, хранящее данные в виде битовой карты, без сжатия.

Существует 2 разновидности BMP:
1) DDB (Device Dependent Bitmap)
2) DIB (Device Independent Bitmap)

Отличия состоят в формате хранения данных. У DIB & видеопамяти разные форматы хранения цвета, у DDB & видеопамяти формат один и тот же. При отображении картинки DIB происходит преобразование данных в формат видеопамяти.

BMP состоит из 4 частей:
1) Заголовок файла
2) Заголовок изображения
3) (Палитра) — может отсутствовать
4) Данные изображения

BMP файл может иметь разную глубину цвета:
1. 1 бит / пк 2 каких-то цвета, обычно ЧБ
2. 2 бит / пк цвет по таблице (4)
3. 4 бит / пк цвет по таблице (16)
4. 8 бит / пк цвет по таблице (256)
5. 16 бит / пк ARGB
6. 24 бит / пк BGR
7. 32 бит / пк ARGB

Заголовок файла:

Описание	| Байты
-|-
Тип (BM) | 0-1 (буквы BM)
Размер файла | 2-5
Резервные поля | 6-9
Смещение данных изображения| 10-13

Заголовок изображения:

| Описание                                  | Байты |
| ----------------------------------------- | ----- |
| Размер заголовка Bitmap (40 байт)         | 14-17 |
| Ширина (пк)                               | 18-21 |
| Высота (пк)                               | 22-25 |
| Число плоскостей (1)                      | 26-27 |
| Бит на пиксель (глубина)                  | 28-29 |
| Тип сжатия                                | 30-33 |
| 0 или размер сжатого изображения в байтах | 34-37 |
| Горизонтальное разрешение (пк/м)          | 38-41 |
| Вертикальное разрешение                   | 42-45 |
| Размер таблицы цветов                     | 46-49 |
| Количество "важных" цветов                | 50-53 |

Размер палитры цветов = 4 \* N, где N — количество цветов

* Формат метаданных может отличаться в разных версиях BMP-файлов

>Где заканчиваются метаданные? — В метаданных содержится смещение данных изображения в позиции 10-13. Смещение — номер первого байта данных изображения.

Изображения хранятся построчно, начиная с левого нижнего угла.

Каждая строка хранит количество байт кратное 4.
Моя догадка, это для того, чтобы можно было использовать IntPtr.

[[Считывание BMP]]

#Files #Files/Images/BMP