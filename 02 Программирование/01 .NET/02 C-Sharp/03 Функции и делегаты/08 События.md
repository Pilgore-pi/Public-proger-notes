Назад: [[07 _Встроенные делегаты|Встроенные делегаты]]

Событие — это факт совершившегося действия или изменения состояния объекта. При возникновении события, все объекты, отслеживающие это событие, могут в момент его возникновения выполнять различные операции. Эти операции можно задавать с помощью сторонних объектов, не имеющим понятия о внутренней реализации объекта, вызвавшего событие.

С точки зрения .Net, событие — это именованный делегат, при вызове которого, будут запущены все методы, подписавшиеся на событие. Другими словами – это публичный член класса, который позволяет снаружи класса узнать, что внутри класса что-то случилось.

```
[<modifier>] event <Delegate> MyEvent;
```

```csharp
event Action EverythingExploded;
```

События могут содержаться в: структурах, классах, интерфейсах.

>Обработчик события – это метод, соответствующий типу делегата события, который вызывается при происшествии события.

Событие могут обрабатывать множество обработчиков событий. Это можно сделать с помощью подписки на события нескольких методов или лямбд, или делегата.

Определяющий событие тип обладает полным доступом над событием. Он вызывает событие тогда, когда оно должно вызываться. Снаружи можно выполнить только 2 действия:

1) Подписка на событие (`myEvent += EventHandler`)
2) ~~Дизлайк~~ Отписка от события (`meEvent -= EventHandler`)

Есть 3 способа непосредственного запуска события из определяющего типа:

1) `MyEvent(...)`
2) `MyEvent.Invoke(...)`
3) `MyEvent?.Invoke(...)` -- возвращает null, если событие == null

Можно более тонко настроить механизм подписки и отписки от события. У событий есть 2 скрытых метода, называемых `add_MyEvent` & `remove_MyEvent`. К ним можно обратиться следующим образом:

```csharp
delegate void AccountHandler(string message);
private event AccountHandler _notify;
public event AccountHandler Notify
{
	add
	{
		_notify += value;
		...
	}
	remove
	{
		_notify –= value;
		...
	}
}
```

## Отличия делегата и события

1. Делегат можно вызвать где угодно, поэтому нельзя его использовать как событие, так как кто угодно сможет его вызвать.
2. Событие содержит приватное поле-делегат со ссылками на все обработчики событий
3. Событие содержит 2 приватных метода подписки и отписки от события.
4. Событие, не может быть локальной переменной в методе

В .Net существует установленный стандарт формы обработчиков событий:

```csharp
void Handler(object sender, EventArgs e) {...}
```

`EventArgs` -- базовый класс для всех классов, предназначенных для передачи информации событий.

#C-Sharp #C-Sharp/Functions/Delegates