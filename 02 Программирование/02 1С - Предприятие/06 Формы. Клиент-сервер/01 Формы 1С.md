
* **Обычное приложение** — приложение созданное с помощью "обычных" форм, которые нужно настраивать вручную, размещая необходимые элементы управления. 1С версий 8.0 и 8.1 работал только с такой версией приложения. Во времена этих версий 1С, понятия "обычное приложение" еще не выделялось

* **Управляемое приложение** — приложение построенное с помощью управляемых форм. Разрабатывать управляемые формы проще, благодаря автоматической компоновки элементов формы ^73e966

"Обычное приложение" — это устаревший вариант интерфейса. Но, несмотря на это, обычные формы все еще используются.

Конструирование "обычной формы"

![[1C Конструирование обычной формы.png]]

Как пользователь видит "обычную форму":

![[1C Интерфейс обычной формы.png]]

>Управляемые формы позволяют определять, где выполняется код, на клиенте или на сервере.

Код, выполняемый на клиенте (**[[_Рефлексия 1С#^99b5ea|&НаКлиенте]]**), выполняется на машине пользователя.
Код, выполняемый на сервере (**[[_Рефлексия 1С#^99b5ea|&НаСервере]]**) выполняется на сервере с базой данных.

>Управляемые формы, благодаря автоматизации размещения элементов, позволяют редактировать форму даже в режиме приложения.

>Для управляемых форм было добавлено свойство "Параметры", которое представляет собой `Структуру` с различными параметрами, применяемыми к форме.


## Командная панель

У каждой формы и коллекции формы есть "Командная панель", в которой приведенеы все базовые функции по работе с формой или динамическим списком (Создать, Копировать, Найти, Удалить, Фильтры...). По умолчанию команды командной панели нельзя редактировать.

Можно обойти это ограничение несколькими способами:

- Перетащить стандартную или свою команду в командную панель формы или таблицы формы. При этом недоступная стандартная команда удалится (если она была заменена также стандартной командой), а доступная останется. Все параметры добавленной команды (как кнопки) будут доступны
- Изменить состав доступных команд в свойствах формы или таблицы формы. В составе команд можно настроить, какие команды вообще будут существовать для того или иного элемента формы, у которого есть командная панель

Чтобы **избавиться от стандартных кнопок** в командной панели, нужно отключить ее автозаполнение командную панель.

Чтобы **удалить** командную панель, нужно установить свойство формы или таблицы формы **`ПоложениеКоманднойПанели`** в значение **`Нет`**.

>Возвращаемый объект оформления строки является самостоятельным объектом и не связан с содержимым табличного поля. Поэтому при его редактировании изменения в табличном поле не отображаются. Для того, чтобы изменения данного объекта отображались в табличном поле необходимо пользоваться обработчиками событий ПриВыводеСтроки или ПриПолученииДанных.

>Команды на форме могут быть удалены автоматически из-за несоответствия прав пользователя. Даже вручную созданные команды, меняющие данные ИБ будут удалены для пользователя не обладающего правом редактирования данных. *В коде доступ к удаленным командам также пропадет, что может привести к исключениям*

# Структура типа "ФормаКлиентскогоПриложения"

Существует 2 типа, представляющих понятие "Форма" в 1С:Предприятие 8.3:

- Форма — общий тип для всех форм
- ФормаКлиентскогоПриложения — тип управляемой формы со специфичными свойствами и методами

Так как ФормаКлиентскогоПриложения представляет именно управляемую форму, то далее будет описываться именно этот тип.

## Свойства управляемой формы

| Свойство                                   | Описание                                                                                                                                                                                                                                |
| ------------------------------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **`<ИмяРеквизита>`**                       | На форме можно создавать произвольные реквизиты любых типов. После создания нового реквизита, он будет доступен для обращения как к свойству формы                                                                                      |
| **Параметры**                              | Структура с встроенными и добавленными параметрами, которые могут быть использованы в логике обработки формы; Тип: `ДанныеФормыСтруктура`                                                                                               |
| **Окно**                                   | Тип: `ОкноКлиентскогоПриложения`; Окно, в котором находится данная форма                                                                                                                                                                |
| **РежимОткрытияОкна**                      | Тип: `РежимОткрытияОкнаФормы`; Режим, в котором будет открываться окно формы. [[#Режим открытия формы\|Подробнее]]                                                                                                                      |
| **Элементы**                               | Коллекция всех элементов управления формы. Доступ к элементам из этого свойства не зависит от их иерархии                                                                                                                               |
| **Команды**                                | Коллекция всех команд, определенных для данной формы; Тип: `КомандыФормы`                                                                                                                                                               |
| **ЭтотОбъект**                             | Ссылка на текущий объект формы                                                                                                                                                                                                          |
| **ТекущийЭлемент**                         | Активный на данный момент времени элемент формы                                                                                                                                                                                         |
| **ТолькоПросмотр**                         | Определяет, доступна ли форма для редактирования. Не влияет на команды (кнопки), у которых флаг `ИзменяетСохраняемыеДанные = Ложь`                                                                                                      |
| **Доступность**                            | Определяет, доступна ли форма для интерактивного взаимодействия с пользователем. Установка этого свойства не всегда позволяет полностью сделать форму недоступной, так как некоторые подчиненные элементы все равно остаются доступными |
| **ВладелецФормы**                          | Элемент формы или сама форма, являющиеся владельцами текущей формы                                                                                                                                                                      |
| **ПоложениеКоманднойПанели**               | Тип: `ПоложениеКоманднойПанелиФормы`; Значения: `Нет`, `Верх`, `Низ`, `Авто`. Определяет расположение и наличие командной панели для формы                                                                                              |
| АвтоЗаголовок                              |                                                                                                                                                                                                                                         |
| АвтоматическоеСохранениеДанныхВНастройках  |                                                                                                                                                                                                                                         |
| АвтоНавигационнаяСсылка                    |                                                                                                                                                                                                                                         |
| ВертикальнаяПрокрутка                      |                                                                                                                                                                                                                                         |
| ВертикальноеПоложениеПодчиненных           |                                                                                                                                                                                                                                         |
| ВертикальныйИнтервал                       |                                                                                                                                                                                                                                         |
| ВыравниваниеЭлементовИЗаголовков           |                                                                                                                                                                                                                                         |
| Высота                                     | Высота формы. Если Высота = 0, то она будет определена системой автоматически                                                                                                                                                           |
| Ширина                                     | Ширина формы. Если Ширина = 0, то она будет определена системой автоматически                                                                                                                                                           |
| ШиринаПодчиненныхЭлементов                 |                                                                                                                                                                                                                                         |
| ГоризонтальноеПоложениеПодчиненных         |                                                                                                                                                                                                                                         |
| ГоризонтальныйИнтервал                     |                                                                                                                                                                                                                                         |
| Группировка                                |                                                                                                                                                                                                                                         |
| Заголовок                                  |                                                                                                                                                                                                                                         |
| ЗакрыватьПриВыборе                         |                                                                                                                                                                                                                                         |
| ЗакрыватьПриЗакрытииВладельца              |                                                                                                                                                                                                                                         |
| ИмяФормы                                   | Стандартный идентификатор формы                                                                                                                                                                                                         |
| ИспользуемыйСерверФормы                    |                                                                                                                                                                                                                                         |
| КлючНазначенияИспользования                |                                                                                                                                                                                                                                         |
| КлючСохраненияПоложенияОкна                |                                                                                                                                                                                                                                         |
| КлючУникальности                           |                                                                                                                                                                                                                                         |
| КоманднаяПанель                            |                                                                                                                                                                                                                                         |
| Масштаб                                    |                                                                                                                                                                                                                                         |
| МодальныйРежим                             | Тип: `Булево`; Режим монопольной и синхронной работы формы                                                                                                                                                                              |
| Модифицированность                         |                                                                                                                                                                                                                                         |
| НавигационнаяСсылка                        |                                                                                                                                                                                                                                         |
| ОписаниеОповещенияОЗакрытии                |                                                                                                                                                                                                                                         |
| ОтображатьЗаголовок                        |                                                                                                                                                                                                                                         |
| ОтображатьКнопкуЗакрытия                   |                                                                                                                                                                                                                                         |
| ОтображениеОбсуждений                      |                                                                                                                                                                                                                                         |
| ПоведениеКлавишиEnter                      |                                                                                                                                                                                                                                         |
| ПодчиненныеЭлементы                        |                                                                                                                                                                                                                                         |
| ПроверятьЗаполнениеАвтоматически           |                                                                                                                                                                                                                                         |
| СворачиваниеЭлементовПоВажности            |                                                                                                                                                                                                                                         |
| СоставКоманднойПанелиНаМобильномУстройстве |                                                                                                                                                                                                                                         |
| СохранениеДанныхВНастройках                |                                                                                                                                                                                                                                         |
| СохраняемыеВНастройкахДанныеМодифицированы |                                                                                                                                                                                                                                         |
| УникальныйИдентификатор                    |                                                                                                                                                                                                                                         |
| УсловноеОформление                         |                                                                                                                                                                                                                                         |

Ширина и высота элементов управления формы измеряется в относительных числовых значениях, примерно равных средней высоте и ширине одного текстового символа.

#### Доступность и видимость

Если *видимость* установить в значение `Ложь`, то элемент управления на форме будет полностью игнорироваться, поэтому при обращении к элементу со свойством `Видимость = Ложь`, возникнет ошибка. Если нужно ограничить видимость элемента для пользователя, нужно настраивать свойство ПользовательскаяВидимость, в таком случае элемент формы будет доступен в коде, но недоступен для пользователя.

**Если сделать родительский элемент (например, Группу) на форме недоступным (*Доступность* = ложь), то все дочерние элементы также перестанут быть доступными не только в интерфейсе, НО И В КОДЕ, поэтому сначала нужно менять дочерние элементы, а потом родительские**. При этом ошибки может не возникнуть. В моем случае был бесконечный цикл вызовов события ПриАктивизацииСтроки (на форме списка)

#### Режим открытия формы

Есть 3 режима открытия окна формы:

1. **Независимый:** открытие формы на весь экран без блокировки других форм
2. **БлокироватьОкноВладельца:** Открывает форму как плавающее окно с блокированием вызвавшей формы до тех пор, пока дочерняя форма не будет закрыта.
3. **БлокироватьВесьИнтерфейс:** Открывает форму как плавающее окно с блокированием всего интерфейса программы 1С, кроме открытого окна

Свойство **`РежимОткрытияОкна`** не влияет на открытие формы в следующих случаях:

- Форма открывается в модальном (синхронном) режиме;
- Форма открывается в уже существующем основном или вспомогательном окне;
- Форма открывается из формы, блокирующей интерфейс

### Различия "Объект" и "Объект.Ссылка"

В 1С:Предприятие переменные модуля формы могут принимать два основных типа: **Объект** и **Объект.Ссылка**. Эти два понятия имеют разные назначения и поведение, что важно учитывать при разработке.

#### Основные отличия

##### Ссылка

- **Определение**: Ссылка представляет собой уникальный идентификатор объекта в базе данных. Она указывает на конкретный элемент, например, документ или справочник.
  
- **Доступ к данным**: Ссылка всегда обращается к данным непосредственно из базы. Это означает, что при использовании ссылки вы получаете актуальные данные, которые могут изменяться в базе данных.

- **Пример использования**: Если вы хотите получить информацию о документе, который был изменен другим пользователем, использование ссылки гарантирует, что вы получите последние данные.

##### Объект

- **Определение**: Объект — это экземпляр данных, который создается в памяти на основе информации, полученной из базы данных. Он представляет собой копию данных на момент их загрузки.

- **Доступ к данным**: Объект может хранить данные в кэше, и если данные в базе изменятся, объект не обновится автоматически, пока вы не перезагрузите его. Это может привести к несоответствию между данными в объекте и данными в базе.

- **Пример использования**: Если вам нужно работать с данными, которые не будут изменяться в процессе выполнения кода (например, для временных расчетов), использование объекта может быть более эффективным.

##### Применение в коде

При написании кода в модуле формы, важно понимать, когда использовать каждую из переменных:

- Используйте **Ссылка**, когда необходимо получить актуальные данные из базы или когда данные могут изменяться в процессе работы.

- Используйте **Объект**, когда вы хотите работать с данными, которые не будут изменяться, и вам не нужно постоянно обращаться к базе данных для получения актуальной информации.

## Команды формы

Это специальные объекты для управления командами (подпрограммами), зачастую, ассоциированные с кнопками. У каждой команды есть имя, заголовок и режим отображения.

Команды могут быть подчинены форме или существовать на уровне конфигурации. [[Команды|Подробнее о командах здесь]]

## Параметры формы

> **Параметры формы** — это настраиваемая структура, содержащая ряд параметров как встроенных, так и добавленных вручную при открытии формы с передачей параметров. Ниже перечислены встроенные параметры формы:

Параметры формы существуют только в рамках события ПриСозданииНаСервере. Если установить свойство **`Ключевой параметр`** в значение **`Истина`**, то параметр будет являться частью идентификатора формы и будет существовать, пока открыта форма

| Параметр                            | Описание                                                                    |
| ----------------------------------- | --------------------------------------------------------------------------- |
| **`ВыборДобавлением`**              | ??? Доступен, начиная с версии 8.3.23                                       |
| **`ЗакрыватьПриВыборе`**            | Закрывать ли форму при совершении выбора                                    |
| **`ЗакрыватьПриЗакрытииВладельца`** | Закрывать ли форму при закрытии владельца                                   |
| **`КлючНазначенияИспользования`**   | Определяет назначение использования формы...                                |
| **`ПараметрыФункциональныхОпций`**  | Содержит параметры функциональных опций, которые будут установлены форме... |
| **`ТолькоПросмотр`**                | Позволяет задать свойство `ТолькоПросмотр` для текущей формы                |

Все параметры формы можно разделить на две группы:
- **стандартные** и
- **заданные разработчиком**

Большим плюсом стандартных параметров является отсутствие необходимости какой-либо обработки: задал параметр — получил результат. Список этих параметров, определяется типом объекта.

Например, параметр «`ТекущееЗначение`», позволяет позиционировать форму выбора справочника на определенном элементе. Большим плюсом является, что в самой форме не требуется писать обработчиков для предопределенных параметров, сокращает количество кода.

```bsl
Параметры = Новый Структура("ТекущееЗначение", ТекЭлемент);
ФормаВыбора = ПолучитьФорму("Справочник.Номенклатура.ФормаВыбора", Параметры);
ФормаВыбора.Открыть();
```
## Методы управляемой формы

| Метод                                                                | Описание                                                                                                                                                                                                                                                        |
| -------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **`Активизировать()`**                                               | Делает текущую форму активной                                                                                                                                                                                                                                   |
| **`Открыть()`**                                                      | Открывает форму и делает ее активной                                                                                                                                                                                                                            |
| **`ОткрытьМодально()`**                                              | Открывает форму в модальном режиме                                                                                                                                                                                                                              |
| **`Открыта()`**                                                      | Проверяет, открыта ли форма                                                                                                                                                                                                                                     |
| **`Закрыть()`**                                                      | Закрывает форму                                                                                                                                                                                                                                                 |
| **`РеквизитФормыВЗначение(имяРеквизита, [Тип])`**                    | Преобразует реквизит формы в значение прикладного типа                                                                                                                                                                                                          |
| **`ЗначениеВРеквизитФормы(значение, имяРеквизита)`**                 | Преобразует значение прикладного типа в данные формы, если это преобразование определено для преобразуемой переменной                                                                                                                                           |
| **`ВводДоступен()`**                                                 | Определяет, возможен ли ввод данных в форму                                                                                                                                                                                                                     |
| **`ВыбратьИзМенюАсинх(списокЗначений, [элФормы])`**                  | Показывает меню для выбора значения. Набор значений для выбора задаются списком значений, меню будет расположено около переданого элемента формы или около его активной области                                                                                 |
| **`ВыбратьИзМеню(списокЗначений, [элФормы])`**                       |                                                                                                                                                                                                                                                                 |
| **`ПоказатьВыборИзМеню()`**                                          | Устаревший асинхронный вариант метода                                                                                                                                                                                                                           |
| **`ВыбратьИзСпискаАсинх(списокЗначений, [элФормы])`**                | Показывает выпадающий список с возможностью выбора                                                                                                                                                                                                              |
| **`ВыбратьИзСписка(списокЗначений, [элФормы])`**                     |                                                                                                                                                                                                                                                                 |
| **`ПоказатьВыборИзСписка()`**                                        | Устаревший асинхронный вариант метода                                                                                                                                                                                                                           |
| **`ВыполнитьПереход(объектИБ)`**                                     | ???                                                                                                                                                                                                                                                             |
| **`ЗаблокироватьДанныеФормыДляРедактирования()`**                    | Блокирует доступ формы к редактированию данных информационной базы                                                                                                                                                                                              |
| **`РазблокироватьДанныеФормыДляРедактирования()`**                   | Снимает блокировку данных формы для редактирования                                                                                                                                                                                                              |
| **`ИзменитьРеквизиты([новыеРеквизиты],`<br>`[удаляемыеРеквизиты])`** | Позволяет добавить и удалить реквизиты. `новыеРеквизиты` — это массив РеквизитовФормы, а `удаляемыеРеквизиты` — это массив локальных путей к существующим реквизитам. Данный метод достаточно ресурсоемкий                                                      |
| **`ПроверитьЗаполнение()`**                                          | Явным образом проверяет заполнение всех реквизитов, для которых свойство `ПроверятьЗаполнение` установлено в `"Выдавать ошибку"`. Возвращает ложь, если какой-то проверяемый реквизит не заполнен. По умолчанию этот методы вызывается при проведении документа |
| **`ЗаполнитьПриПереоткрытииСДругогоСервера()`**                      |                                                                                                                                                                                                                                                                 |
| **`НачатьПолучениеОбсуждения()`**                                    |                                                                                                                                                                                                                                                                 |
| **`НачатьРедактированиеЭлемента()`**                                 |                                                                                                                                                                                                                                                                 |
| **`ОбновитьОтображениеДанных()`**                                    |                                                                                                                                                                                                                                                                 |
| **`ОповеститьОбАктивизации()`**                                      |                                                                                                                                                                                                                                                                 |
| **`ОповеститьОВыборе()`**                                            |                                                                                                                                                                                                                                                                 |
| **`ОповеститьОЗаписиНового()`**                                      |                                                                                                                                                                                                                                                                 |
| **`ОтключитьОбработчикОжидания()`**                                  |                                                                                                                                                                                                                                                                 |
| **`ОтключитьОтметкуНезаполненного()`**                               |                                                                                                                                                                                                                                                                 |
| **`ОткрытьСправкуФормы()`**                                          |                                                                                                                                                                                                                                                                 |
| **`ОтобразитьИзменениеДанных()`**                                    |                                                                                                                                                                                                                                                                 |
| **`ПереоткрытьСДругогоСервера()`**                                   |                                                                                                                                                                                                                                                                 |
| **`ПодключитьОбработчикОжидания()`**                                 |                                                                                                                                                                                                                                                                 |
| **`ПолучитьДействие(имяСобыия)`**                                    | Получает имя обработчика указанного события                                                                                                                                                                                                                     |
| **`ПолучитьОбсуждениеАсинх()`**                                      |                                                                                                                                                                                                                                                                 |
| **`ПолучитьПараметрыФункциональныхОпцийФормы()`**                    |                                                                                                                                                                                                                                                                 |
| **`ПолучитьРеквизиты()`**                                            | Получение массива РеквизитовФормы                                                                                                                                                                                                                               |
| **`ПолучитьФункциональнуюОпциюФормы()`**                             |                                                                                                                                                                                                                                                                 |
| **`УстановитьВыполнениеОбработчиковСобытия()`**                      |                                                                                                                                                                                                                                                                 |
| **`УстановитьВыполнениеПослеОбработчиковСобытия()`**                 |                                                                                                                                                                                                                                                                 |
| **`УстановитьДействие(имяСобытия, имяОбработчика)`**                 | Устанавливает обработчик события                                                                                                                                                                                                                                |
| **`УстановитьПараметрыФункциональныхОпцийФормы()`**                  |                                                                                                                                                                                                                                                                 |

## Шаблоны управляемых форм

Для экономии времени разработки, в 1С было создано несколько шаблонов форм с предопределенной структурой, которые, впрочем, можно изменять как угодно, но, в общем случае, следует соблюдать назначение той или иной формы согласно общепринятым стандартам

| Шаблон                                 | Где доступно                                                                                                                                                                                                                            | Описание                                       |
| -------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------- |
| **Произвольная форма**                 | Везде                                                                                                                                                                                                                                   | Пустая форма без элементов                     |
| Форма отчета                           | Отчет; Общая форма                                                                                                                                                                                                                      | Формирование и настройка отчета                |
| Форма настроек отчета                  | Отчет; Общая форма                                                                                                                                                                                                                      |                                                |
| Форма варианта отчета                  | Отчет; Общая форма                                                                                                                                                                                                                      | Выбор одного из вариантов отчета               |
| Форма поиска                           | Общая форма                                                                                                                                                                                                                             | Полностью готовая форма для глобального поиска |
| Форма констант                         | Общая форма                                                                                                                                                                                                                             |                                                |
| Форма настроек динамического списка    | Общая форма                                                                                                                                                                                                                             | Глобальная настройка динамических списков?     |
| Форма истории изменений истории данных | Общая форма                                                                                                                                                                                                                             |                                                |
| Форма различий версий истории данных   | Общая форма                                                                                                                                                                                                                             |                                                |
| Форма данных версии истории данных     | Общая форма                                                                                                                                                                                                                             |                                                |
| Форма журнала документов               | ЖурналДокументов                                                                                                                                                                                                                        | Управление объединенным списком документов     |
| **Форма элемента**                     | Справочник;<br>Документ;<br>КритерийОтбора<br>ПланВидовХарактеристик;<br>ПланСчетов;<br>ПланВидовРасчета;<br>БизнесПроцесс;<br>Задача                                                                                                   | Управление одиночным объектом                  |
| Форма группы (элементов)               | Справочник;<br>ПланВидовХарактеристик                                                                                                                                                                                                   |                                                |
| **Форма списка**                       | Справочник;<br>Документ;<br>Перечисление;<br>ПланОбмена;<br>ПланВидовХарактеристик;<br>ПланСчетов;<br>ПланВидовРасчета;<br>РегистрСведений;<br>РегистрНакопления;<br>РегистрБухгалтерии;<br>РегистрРасчета;<br>БизнесПроцесс;<br>Задача | Управление списком объектов                    |
| **Форма выбора**                       | Справочник;<br>Документ;<br>Перечисление;<br>ПланОбмена;<br>ПланВидовХарактеристик;<br>ПланСчетов;<br>ПланВидовРасчета;<br>БизнесПроцесс;<br>Задача                                                                                     | Выбор объекта из списка                        |
| Форма выбора группы (элементов)        | Справочник;<br>ПланВидовХарактеристик                                                                                                                                                                                                   | Выбор группы объектов из списка                |
| Форма обработки                        | Обработка                                                                                                                                                                                                                               | Тупо тоже самое, что и произвольная форма      |
| Форма записи регистра сведений         | РегистрСведений                                                                                                                                                                                                                         |                                                |
| Форма набора записей регистра          | РегистрСведений;<br>РегистрНакоплений;<br>РегистрБухгалтерии;<br>РегистрРасчета                                                                                                                                                         |                                                |
| Форма узла плана обмена                | ПланОбмена                                                                                                                                                                                                                              |                                                |
| Форма сохранения настроек              | ХранилищеНастроек                                                                                                                                                                                                                       |                                                |
| Форма загрузки настроек                | ХранилищеНастроек                                                                                                                                                                                                                       |                                                |

Для наиболее часто используемых объектов конфигурации используются эти 4 вида шаблонов:

##### 1. Форма элемента

Форма на уровне 1 экземпляра объекта, где отображены все реквизиты объекта и его табличные части. В командной панели формы отображаются стандартные команды для данного типа объекта (записать, провести, пометить на удаление...)

Для иерархических справочников может быть использован шаблон **Форма группы справочника**

##### 2. Форма списка

Форма для вывода всех объектов определенного типа в виде таблицы, где столбцами являются реквизиты, а строками — конкретные объекты. По умолчанию отображается лишь несколько базовых реквизитов. В командной панели формы отображаются 

##### 3. Форма выбора

Форма выбора предназначена для выбора объекта из списка объектов. Аналогична форме списка, но в командной панели вместо кнопок записи и проведения находится кнопка "Выбрать"

Для иерархических справочников может быть использован шаблон **Форма выбора группы справочника**

##### 4. Произвольная форма (пустая)

----

[Параметры формы](https://tokmakov.msk.ru/blog/item/59)

----

Панель навигации позволяет в рамках одного окна открывать множество форм. Отображаются эти формы как гиперссылки вверху окна

В режиме тонкого клиента можно настроить панель навигации, открыв настройки, "Окно" > "Настройка панели навигации формы..."

настройки, заданные на клиенте, будут хранится в **хранилище настроек** текущего пользователя. Чтобы сбросить настройки, нужно открыть "Настройка панели навигации формы..." и в подменю "Еще" выбрать "Установить стандартные настройки"

## Добавление своих форм в панель навигации

Чтобы добавить свою форму в панель навигации, ее нужно сначала создать и отнести в одну из подсистем. Таким образом созданная форма будет отображаться в глобальных командах. В конфигураторе, редакторе формы, где мы хотим изменить панель навигации, нужно открыть вкладку "Глобальные команды" и найти нужную форму, после чего нужно перетащить команду в Панель навигации "Перейти"

## Ком панель (оффициал)

# Автоматическое заполнение командной панели в форме

Для удобства и ускорения разработки форм в платформе 1С:Предприятие 8 реализована возможность автоматического заполнения командных панелей.

Данная возможность также позволяет избежать необходимости модернизации уже разработанных форм (в контексте командных панелей). Это может потребоваться в случае добавления в платформу новой функциональности или же вследствие изменений в разрабатываемой конфигурации.

**Пример.** В конфигурации имеется документ РасходнаяНакладная с разработанной формой документа, в которую вставлена автоматически заполняемая командная панель. В конфигурацию добавляется документ ПриходнаяНакладная, и для него настраивается возможность ввода на основании документа РасходнаяНакладная. При этом автоматически в форме документа РасходнаяНакладная, в командной панели, появится подменю "Ввести на основании" с кнопкой, инициирующей ввод документа ПриходнаяНакладная на основании данного документа.

Набор действий и порядок их выполнения зависят от значения свойства "**Источник действий**" командной панели.

## Источники действий

Источник действий командной панели не только предоставляет набор действий и стандартных подменю для редактирования кнопок панели, но и формирует панель предопределенным набором кнопок в режиме автоматического заполнения командной панели.

В качестве источника действий для командной панели могут быть выбраны:

- **все источники** - служит для объединения действий от всех возможных источников формы, обработка действий при этом будет зависеть от активного элемента формы;
- **форма -** обычно используется в случаях, когда панель должна содержать действия, предоставляемые формой и элементами управления, связанными с реквизитом формы по умолчанию; действия будут обрабатываться данными элементами управления и формой;
- **конкретный элемент управления** - предназначен для непосредственной привязки командной панели к элементу управления; действия от панели с таким источником будут обрабатываться только данным элементом управления.

Каждый из вариантов источника действий обладает особенностями как в процессе заполнения командных панелей кнопками, так и в порядке выполнения действий, установленных в кнопках.

### Порядок заполнения командных панелей

_**Все источники** -_ в этом случае для заполнения командной панели используются действия, предоставленные всеми имеющимися в форме источниками (форма и все элементы управления, предоставляющие действия).

_**Форма** -_ для заполнения командной панели используются действия, предоставленные формой и элементами управления, связанными с реквизитом формы по умолчанию (выделен жирным шрифтом на закладке "Реквизиты" редактора формы).

**_Конкретный элемент управления_** - для заполнения командной панели используются действия, предоставляемые данным элементом управления. Подобным источником действий может служить элемент управления ТабличноеПоле.

Если источник действий является по сути составным (все источники или форма), то действия от различных источников объединяются. При объединении дублирующиеся действия игнорируются.

### Порядок выполнения действий и обновления состояния кнопок

Действие может быть инициировано пользователем либо путем нажатия на кнопку командной панели, либо нажатием на клавиатуре сочетания клавиш, назначенного кнопке.

Под обновлением состояния кнопок командной панели в данном случае подразумевается запрет/разрешение кнопки, установку пометки и т.д. Обновление состояния происходит в моменты бездействия системы. На текущее состояние кнопки панели влияет множество внешних (по отношению к кнопке) факторов, а также значения свойств кнопки, соответствующих тому или иному состоянию (например, свойства: "**Доступность**", "**Пометка**"). Состояние доступности и пометки кнопки зависят в первую очередь от значений соответствующих свойств. Поясним данное высказывание на примере состояния доступности кнопки командной панели и, связанного с этим состоянием, свойства "**Доступность**": если свойство установлено в значение **Истина**, то реальная доступность кнопки определяется платформой на основе текущего состояния источника данных; в противном случае кнопка считается недоступной (вне зависимости от текущего состояния источника данных).

Рассмотрим порядок обновления состояния кнопок командной панели и выполнения действий. Этот порядок зависит от вида действия, установленного в кнопке, и от значения свойства "**Источник действий** ". В случае, когда действием является вызов процедуры, состояние кнопки (доступность) определяется платформой исходя из наличия указанной в действии процедуры; в случае доступности кнопки, при инициации действия будет вызвана соответствующая процедура модуля. Для действий, отрабатываемых платформой, порядок выполнения следующий:

_**Все источники** -_ сначала производится попытка обновить состояние кнопки (или выполнить действие) посредством элементов управления, связанных с реквизитом формы по умолчанию. Далее, в случае неудачи, попытка производится для активного элемента управления и, затем, для самой формы.

**_Форма_** - сначала производится попытка обновить состояние кнопки (или выполнить действие) посредством элементов управления, связанных с реквизитом формы по умолчанию. Далее, в случае неудачи, попытка производится для формы.

**_Конкретный элемент управления_** - действия выполняются (или обновляется состояние) непосредственно источником, вне зависимости от его активности в форме.

## Свойство "Автозаполнение"

Установка значение **Истина** свойству "**Автозаполнение** " командной панели приводит к автоматическому заполнению кнопками в соответствии с выбранным источником действий. Автоматически добавленные кнопки не сохраняются в панели, их набор и порядок определяется платформой и зависит от множества факторов (в основном от текущего состояния источника действий). В случае установленного свойства "**Автозаполнение**" изменение состава кнопок, предоставляемого источником действий, автоматически отражается на составе кнопок командной панели, связанной с ним. Для подобных кнопок отсутствует возможность редактирования их свойств или изменения положения в командной панели.

### Имена кнопок

Автоматически вставленные кнопки не имеют строго предопределенных имен, значения имен для них назначаются в процессе заполнения панели. Таким образом имя кнопки зависит от порядка вставки кнопки в панель и, следовательно, не рекомендуется ориентироваться на имена подобных кнопок в процессе программирования формы.

Однако из этого правила есть исключения.

### Добавление кнопок в автоматически заполненные подменю

В автоматически заполненные панели и подменю имеется возможность добавления неавтоматических кнопок. При этом в случае добавления таких кнопок в подменю, имя кнопки подменю будет зафиксировано и будет оставаться неизменным до тех пор, пока данное подменю содержит кнопки, добавленные вручную.

## Ручное заполнение панели

Быстрое заполнение панели кнопками с возможностью их последующего редактирования можно осуществить через контекстное меню командной панели. Для этого необходимо выбрать пункт контекстного меню "_Заполнить автоматически_". Командная панель заполниться кнопками аналогично случаю с установленным свойством "**Автозаполнение**", однако, кнопки панели будут доступны для редактирования и появится возможность изменять их состав и порядок.

## Заполнение системного подменю

Аналогично командной панели возможностью автозаполнения обладают подменю, предоставляемые источником действий. При вставке такого подменю в панель происходит его автоматическое заполнение. Для заполнения кнопками с возможностью редактирования следует воспользоваться контекстным меню кнопки и выбрать пункт "_Заполнить автоматически_".

Основные системные подменю:

1. **Действия** - состоит из кнопок, содержащих основные действия, которые можно выполнить источником действий. Например, действия: _Добавить_, _Изменить_, _Удалить_ для элемента управления ТабличноеПоле. Для унификации работы пользователя с формой, при добавлении кнопок в данное подменю рекомендуется придерживаться аналогичного подхода.
2. **Перейти** - содержит кнопки с действиями, которые инициируют открытие (или активизацию) форм объектов (или списков), так или иначе связанных с данным источником действий (или одной из его составных частей). Например: открытие форм подчиненных справочников; открытие движений, в которых документ является регистратором и т.д. Для унификации работы пользователя с формой, при добавлении кнопок в данное подменю рекомендуется придерживаться аналогичного подхода.

#1С #1С/Формы #1С/Конфигурация