
[ПРОДОЛЖЕНИЕ](https://infostart.ru/1c/articles/1702526/)

### Вывод сообщения

#### Классический способ

`Сообщить(текст, СтатусСообщения)`

`СтатусСообщения` — это системное перечисление со следующими значениями: `БезСтатуса, Обычное, Информация, Внимание, Важное, ОченьВажное`... и все они не имеют разницы. Возможно, в предыдущих версиях различия существуют, но в целом, данная функция устарела.

#### Через объект сообщения (**стандартный способ**):

```bsl
Сообщение = новый СообщениеПользователю;
Сообщение.Текст = "Ха-ха, ты лох";
Сообщение.Поле = "Локальный_путь_к_реквизиту_объекта_данных(не_формы)";
Сообщение.Сообщить();
```

#### Предупреждение

Синхронный метод:

`Предупреждение(Текст, Таймаут, Заголовок = "")`

Вывод окна предупреждения с заголовком (или без, если он не указан). Окно закроется по истечении Таймаута или не закроется, если таймаут не задан. **Чтобы данный метод работал, необходимо в свойствах конфигурации в разделе "Совместимость" установить "Режим использования модельности" в значение "Использовать"**. Окно предупреждения блокирует интерфейс приложения, пока оно открыто.

Асинхронный метод:

`ПоказатьПредупреждение(ОписаниеОповещения, Текст, Таймаут, Заголовок)`

Является асинхронным аналогом `Предупреждение()`. ОписаниеОповещения 

#### Оповещение

```bsl
ПоказатьОповещениеПользователя(
    Текст,
    ОбработчикНажатия, // Строка или ОписаниеОповещения
    Пояснение,         // Просто пояснение
    Картинка,          // Тип "Картинка"
    СтатусОповещенияПользователя, //Перечисление
    КлючУникальности   // ID оповещения
);
```

Выводит исчезающее сообщение в правом нижнем углу экрана. Позволяет задать действие при нажатии. Если `ТипЗнч(ОбработчикНажатия) = Тип("Строка")`, то данный параметр будет представлять навигационную ссылку; если `ТипЗнч(ОбработчикНажатия) = Тип("ОписаниеОповещения")`, то будет вызвана процедура, которая содержится в `ОписаниеОповещения`

Если отображается 2 оповещения с одинаковым ключом уникальности и с небольшим интервалом, то второе сообщение заменит первое. Если 2 оповещения имеют разный ключ, то они не будут замещать друг друга. По умолчанию все оповещения уникальны.

>Все параметры данной функции являются необязательными

## Программное открытие формы

```bsl
ОткрытьФорму(
    "<ТипОбъектаМетаданных>.<Объект>[.Форма].<НужнаяФорма>",
    Параметры,    // тип Структура, словарь параметров
    Владелец,
);
```

**Параметры** — это свойство формы, которое можно задать перед ее открытием. Можно задавать свои ключи и их значения, а можно использовать ряд предопределенных ключей, которые можно посмотреть в `Синтаксис-помощник, Интерфейс(Управляемый), Форма клиентского приложения, Расширения <Оъект_метаданных>, Параметры формы`

Основные из предопределенных параметров:

* `Ключ` — ссылка на объект метаданных. Если ссылка имеет неверное значение, то создается новый объект с использованием остальных параметров
* `ЗначениеКопирования` — при открытии формы будет создан объект путем копирования по ЗначениюКопирования, которое является произволной ссылкой
* `Основание` — произвольный объект, являющийся основанием для нового объекта

Можно, также, открыть форму любого динамического списка, задав отбор. Для этого используется специальный ключ `Отбор`. Все предопределенные параметры перечислены в синтаксис помощнике по пути: `Синтаксис-помощник, Интерфейс(Управляемый), Форма клиентского приложения, Расширения динамического списка, Параметры формы`. Значением такого ключа является Структура с необходимыми параметрами отбора.

### Модальное окно

**Модальное окно** (такое как Предупреждение) полностью блокирует интерфейс приложения и остагавливает выполнение кода.

**Модальный (синхронный) метод** — это метод, который открывает модальное окно.
Асинхронным аналогом модального окна является блокирующее окно.

>Любой модальный (синхронный) метод не будет выполняться, если в конфигурации режим использования модальности = Не использовать

### Ввод значений

Модальные (нерекомендуемые) методы:

* `ВвестиЗначение(значение, подсказка, тип)` — получение ввода от пользователя значения указанного типа.
* `ВвестиСтроку(строка, подсказка, длина, многострочность)` — получение строки
* `ВвестиЧисло(числоПоУмолчанию, подсказка, длина, точность)` — получение числа заданной длины и точности
* `ВвестиДату(дата, подсказка, частьДаты)` — получение даты и/или времени. **ЧастьДаты:** системное перечисление (Дата, Время, ДатаВремя)

>Синхронные методы не рекомендуются, так как существуют веб-клиенты, взаимодействующие с 1С. Веб-клиент представляет браузер. Браузеры блокируют все всплывающие окна.

Асинхронные методы:

\* Сокращение ОписаниеОповещения: ОпОп

* `ПоказатьВводЗначения(ОпОп, значение, подсказка, тип)`
* `ПоказатьВводСтроки(ОпОп, строка, подсказка, длина, многострочность)`
* `ПоказатьВводЧисла(ОпОп, числоПоУмолчанию, подсказка, длина, точность)`
* `ПоказатьВводДаты(ОпОп, дата, подсказка, частьДаты)`

>ОписаниеОповещения — это объект, который содержит информацию о методе, который нужно выполнить после закрытия немодального окна. Метод должен быть экспортным (открытым)

```bsl
ОпОп = новый ОписаниеОповещения;

// или

ОпОп = новый ОписаниеОповещения(
    // Имя ЭКСПОРТИРУЕМОЙ процедуры
    имяПроцедуры,
    
    //Модуль, в котором определена процедура
    //Тип: ФормаКлиентскогоПриложения, ОбщийМодуль, Строка, Команда..
    модульПроцедуры,
    
    // объект, который будет передан в процедуру как последний параметр
    дополнительныеПараметры,
    
    // имя экспортируемой процедуры, которая выполнится при ошибке
    имяПроцедурыОбработкиОшибки,
    модульПроцедурыОбработкиОшибки
);
```

Если основная процедура **оповещения** определена в том же модуле, где происходит вызов асинхронной процедуры, то можно в качестве модуля передать ссылку на текущий модуль.

```bsl
оповещение = новый ОписаниеОповещения("ПроцедураПослеВводаЗначения", ЭтотОбъект);
ПоказатьВводЗначения(оповещение, ...);
```

В контексте методов `ПоказатьВвод..` ОписаниеОповещения всегда имеет определенные параметры, которые можно посмотреть в Синтаксис-помощнике при поиске по имени метода `ПоказатьВвод..`

#### Зачем нужно ОписаниеОповещения?

Асинхронные методы выполняются параллельно, в другом потоке. Основной поток приложения продолжит свое выполнение, не дожидаясь выполнения асинхронной функции. Поэтому, при необходимости выполнить метод только после выполнения асинхронного метода, нужно использовать ОписаниеОповещения, которое выполнит указанную процедуру сразу после завершения асинхронного метода.

Кроме того, результат выполнения асинхронной функции будет хранится в параметрах ОписанияОповещения.

#### Преобразование синхронных методов в асинхронные

Можно преобразовать любой модальный метод в асинхронный. Для этого нужно выделить имя синхронного метода, нажать ПКМ, `Рефакторинг`, `Нерекомендуемые синхронные вызовы`, **`Преобразовать вызов`**, `Создать пустую процедуру обработки оповещения (Да)`

### ПоказатьВопрос()

Данный метод показывает вопрос пользователю и предлагает ответить на него.

```bsl
ПоказатьВопрос(
    описаниеОповещения,
    текстВопроса,
    кнопки,            // Тип: РежимДиалогаВопрос или СписокЗначений
    таймаут,           // ожидание ответа пользователя N секунд
    кнопкаПоУмолчанию,
    заголовок,
    кнопкаТаймаута     // кнопка с таймером
);
```

**РежимДиалогаВопроса** — перечисление со следующими значениями:

* ДаНет
* ДаНетОтмена
* Ок
* ОкОтмена
* ПовторитьОтмена
* ПрерватьПовторитьПропустить

**СписокЗначений** — это типа интерфейса `Enumerable`, который предоставляет доступ к методам работы с коллекцией значений, и позволяет перебирать объект в цикле `для каждого`, а также позволяет обращаться по индексу `мойСписок[индекс]`.

Элементом СпискаЗначений является ЭлементСпискаЗначений со следующими свойствами:

* `Значение` — произвольное значение
* `Картинка` — Тип: Картинка, 
* `Пометка` — Тип: Булево, логическое значение для общего пользования
* `Представление` — Тип: Строка или ФорматированнаяСтрока, внешнее представление элемента

Методы:

* `ПолучитьИдентификатор()`

При отображении вопроса можно передавать СписокЗначений кнопок, созданных вручную.

Пример:

```bsl
списокКнопок = новый СписокЗначений();

//СписокЗначений.Добавить(значение, представление, пометка, картинка)
//Все параметры необязательны

списокКнопок.Добавить("Создать", "Создать новый документ");
списокКнопок.Добавить("Открыть", "Открыть документ");
списокКнопок.Добавить("Отмена", "Отмена");
```

>Если в вопросе использовались созданные кнопки, то результатом вопроса будет значение выбранного элемента(кнопки) списка значений.

#1С #1С/UI #1С/Формы