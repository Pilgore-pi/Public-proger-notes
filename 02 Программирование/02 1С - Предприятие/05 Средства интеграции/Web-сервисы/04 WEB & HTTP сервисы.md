
Ссылки:

1. [[05 HTTP-сервисы в 1С|Подробно про HTTP-сервисы]]
2. [[07 Web-сервисы в 1С|Подробно про Web-сервисы]]
3. [Пошаговая инструкция настройки web-сервисов для 1Сv8.3 и IIS 8.5](https://infostart.ru/public/275820/)
4. [Настройка веб сервера Apache + 1С (Пошаговое руководство)](https://infostart.ru/public/646384/)

WEB и HTTP сервисы — две технологии, позволяющие взаимодействовать с 1С удаленно. Причем можно получить доступ как за файрволом, так и через прокси.

С точки зрения 1С, это два объекта метаданных, которые позволяют нам выполнять эти операции. Реализовывается доступ по классической трехзвенной схеме:

- СУБД
- Сервер:
    1. Веб-серверы
    2. Кластер серверов 1С
- Клиент, подключающийся к сервису

#### Применяемость технологий

- Обмен с внешними системами (сайты, магазины, мобильные приложения),
- Обмен данными между базами 1С,
- Работа с внешним оборудованием (телефония, ТСД, весы),
- Предоставление упрощенного интерфейса для пользователей,
- Предоставление API для сторонних систем или партнеров.

В качестве примера можно привести сервис обмена данными, который в типовых конфигурациях в части передачи данных реализован также на WEB сервисах. По сравнению с традиционными COM-соединениями он намного более быстр, а информационные базы в этом случае могут базироваться на абсолютно разных платформах: как на версиях, так и на разных операционных системах

> Обмен данными через Web и HTTP сервисы значительно быстрее, чем обмен через COM-соединения

> Для работы Web & HTTP сервисов необходимо установить сервер (IIS, Apache, 1С: Публикатор или 1С: Линк – Apache с интерфейсом для простого пользователя)

HTTP сервисы на платформе 1С 8.3.5.1068 появились летом 2014 года

HTTP запросы выполняются напрямую
В HTTP данные передаются в формате XML или JSON

В Web-ресурсах вызывается удаленный метод, который является абстракцией над HTTP запросом 
В Web-ресурсах данные передаются в виде XDTO объекта. XDTO — это абстракция над XML

> Схема XML — язык описания XML документа, то есть структура объектов?

XDTO пакеты могут содержать ссылки на пространства имен, которые храняться в объектах `Директивы импорта`

**Свойства пакета XDTO**:

- Имя
- Базовый тип (bool) — если базовый, то экземпляр данных будет содержать поля всех типов пакета XDTO
- Абстрактный (bool) — является ли тип абстрактным. Абстрактный тип не может иметь экземпляров и используется как база для построения подчиненных типов

Описание веб-сервиса выполняется на языке WDSL (Web Services Description Language). Этот язык основан на XML. Описание содержит определение всех используемых типов данных и определение всех доступных операций. Для работы с описанием веб-сервисов используются WS-ссылки. При создании WS-ссылки, нужно указать ссылку на описание веб-сервиса. При задании ссылки, в окне объекта можно увидеть все описанные в XML документе модели данных (пакеты XDTO) и Web-сервисы

Тело запроса HTTP сервиса можно сжать. К примеру в несжатом виде запрос будет весить 284 Кб, а в сжатом виде — 85 Кб. Аналогичный ответ Web-сервиса в несжатом виде весит 727 Кб. Однако операции сжатия и расжатия увеличивают нагрузку на компьютер

## Сравнение COM-соединения, HTTP и Web-сервисов

| Особенность                             | COM-соединение                                                                         | HTTP                                           | Web                                                                   |
| --------------------------------------- | -------------------------------------------------------------------------------------- | ---------------------------------------------- | --------------------------------------------------------------------- |
| Сложность скриптов обработки            | <span style="color:#0F8;">низкая</span>                                                | ниже среднего                                  | средняя                                                               |
| Сложность настройки                     | <span style="color:#0F8;">максимум требуется зарегестрировать COM-коннектор</span>     | <span style="color:#F80;">высокая</span>       | <span style="color:#F80;">очень высокая</span>                        |
| Установка веб-сервера                   | <span style="color:#0F8;">не требуется</span>                                          | <span style="color:#F80;">требуется</span>     | <span style="color:#F80;">требуется</span>                            |
| Регистрация COM-коннектора              | <span style="color:#F80;">требуется</span>                                             | не требуется                                   | не требуется                                                          |
| Доступно в семействах ОС                | <span style="color:#F80;">только Windows</span>                                        | <span style="color:#0F8;">во всех</span>       | <span style="color:#0F8;">во всех</span>                              |
| Встроенный контроль типов данных        | <span style="color:#0F8;">есть</span>                                                  | <span style="color:#F80;">нет</span>           | <span style="color:#0F8;">есть</span>                                 |
| Скорость работы                         | <span style="color:#F33;">одно только создание соединения требует около 5 минут</span> | <span style="color:#0F8;">большая</span>       | <span style="color:#0F8;">большая</span>, но меньше, чем HTTP-сервисы |
| Угроза нарушения целостности базы       | <span style="color:#F80;">присутствует</span>                                          | ?                                              | ?                                                                     |
| Защита передаваемых данных              | <span style="color:#F80;">без шифрования</span>                                        | <span style="color:#0F8;">настраиваемая</span> | <span style="color:#0F8;">настраиваемая</span>                        |
| Реализована проверка и обработка ошибок | нет                                                                                    | нет                                            | да                                                                    |
| Автоматическая документация             | нет                                                                                    |                                                | да (WDSL-ссылки)                                                      |
| Используемые протоколы                  | COM                                                                                    | REST                                           | SOAP                                                                  |
| Требуется поддержка протокола у клиента | COM                                                                                    |                                                | SOAP                                                                  |

* Для использования HTTPS протокола, необходимо получить сертификат SSL

#1С #Web #API/COM #API/HTTP #1С/Интеграция