> **НКД** — Найстройки Компоновки Данных

https://xn----1-bedvffifm4g.xn--p1ai/news/2019-12-30-skd-reporting-techniques/
Здесь самый сок по настройке выбранных данных. Можно использовать конструктор настроек, который определит тип отчета и поля, которые мы хотим отобразить в отчете.

Типы отчета:

1. **Список** — табличное представление данных
2. **Таблица** — кросс-таблица. Каждое поле должно представлять ресурс, который находится на пересечении свойства-столбца и свойства-строки. Если столбцы не заданы, то таблица будет обычной, в конце которой автоматически сформируются итоги
3. **Диаграмма** — графическое представление данных в виде одной из множества диаграм и графиков.

Отчет может содержать множество списков, кросс-таблиц и диаграмм одновременно.

Можно отображать элементы, которые может задавать пользователь. Это нужно, например для установки параметра запроса или фильтрации результатов. Чтобы задать пользовательский элемент, нужно открыть контекстное меню для выбранного поля отчета и выбрать "Свойства элемента пользовательских настроек"

>Не рекомендуется выбирать поля объектов конфигурации отдельно, если возможно выбрать ссылку на данный объект конфигурации. Через ссылку можно получить все необходимые данные и при этом связь полей с объектом будет явной. Если выбирать поля отдельно, то они не будут связаны с данным объектом.

В выбранных полях можно указать поля, вложенные в объект. То есть через ссылку на выбранный в запросе объект, можно получить все его внутренние свойства. По умолчанию выбранное таким образом поле будет отображаться вместе с владельцем в одной колонке через запятую. Чтобы изменить это, нужно перейти в доп. настройки НКД и найти `Расположение реквизитов`. Затем нужно установить данный параметр в значение `Отдельно`.
Теперь внутреннее свойство объекта будет отображаться в отдельной колонке с заголовком формата `Объект.Свойство`. Заголовок для каждого выбранного поля можно менять.

Поля можно объединять в группы

---
В выбранных ПАРАМЕТРАХ самая первая колонка с флажком отвечает за использование этого параметра. То есть будет ли флажок активирован на форме пользователя. Во вкладке Параметры можно указать Использование в значение Всегда, тогда пользователь не сможет отключить флажок

### Варианты отчета

Все варианты отчета используют одну и ту же схему, но у каждого варианта свои независимые Настройки Компоновки Данных.

**Представление** варианта отчета — это его синоним, который будет отображаться на форме

Варианты отчета может создавать как разработчик, так и пользователь. В пользовательском режиме, можно нажать `Еще, Изменить варианты отчета...`, после чего откроется окно редактирования НКД, в том числе, с возможностью настройки вариантов отчета

### Структура отчета

На основе схемы данных можно выбрать, какие поля будут отображаться в отчете. Выбор полей может осуществляться на уровне всего отчета или на уровнях вложенных элементов.

Выбранные поля `<Авто>` означает, что в текущем структурном элементе отчета будут отображаться те же элементы, которые отображаются в родительском элементе.

Любые элементы настроек, для которых ограничение досутпности имеет значение `Ложь`, доступны для пользователя. Чтобы эти элементы были доступны еще и на форме, то нужно включить их в пользовательские настройки (флажок)

#### Элементы структурных настроек

##### Тип элемента **Группировка**

имеет 2 параметра:

1. **Поле** — поле, по которому должна выполняться группировка. Если поле не указано, то будут выведены все поля текущей группы данных (`<Детальные записи>`)

2. **Тип группировки** — позволяет настроить способ группировки отображаемых данных 
    * Без иерархии — вложенные группы не учитываются
    * Иерархия — отображение иерархии справочника и детальных записей
    * Только иерархия — отображение только иерархии без детальных записей

Любую группировку можно сделать доступной для пользователя. Для этого нужно выбрать нужную группировку и открыть контекстное меню (Свойства), затем нужно поставить флаг Группировка и задать понятное название для пользователя.

Можно выводить несколько таблиц, добавив несколько группировок на самом верхнем уровне отчета

>В группировке могут быть только поля, связанные с группируемым полем. Поэтому, если выбирать поля отдельно в запросе, то их нельзя будет использовать в качестве *выбранных полей* в группировке. Такие поля могут быть использованы только как *поля группировки*.

https://xn----1-bedvffifm4g.xn--p1ai/news/2016-07-07-how-to-use-skd-functions/

**Добавление вычисляемых полей в группировку**

Функция `ВЫЧИСЛИТЬ("<Выражение>", "<Группировка>")` позволяет определить значение вычисляемого поля для указанной группировки. `<Группировка>` — это строка, содержащая имя группировки, в контексте которой необходимо вычислить выражение.
* В случае если в качестве имени группировки используется пустая строка, вычисление будет выполнено в контексте текущей группировки
* В случае если в качестве имени группировки будет использована строка ОбщийИтог, вычисление будет выполнено в контексте общего итога
* В остальных случаях вычисление будет выполняться в контексте родительской группировки с таким именем

???

**ВычислитьВыражение (в контексте СКД, вычисляемые поля)**

https://infostart.ru/1c/articles/86764/

Синтаксис

```bsl
ВычислитьВыражение (
    "<Выражение>",
    "<ИмяГруппировки>" // Группировка, в контексте которой нужно вычислить выражение
)
```

##### **Таблица**

Позволяет выводить кросс-таблицы

Для таблицы указываются группировки по строкам и столбцам, а на пересечении этих строк и столбцов всегда должны быть *Ресурсы*.

##### **Диаграммы**

Имеют:

* Область построения — сам график с цифрами
* Область заголовка
* Область легенды — пояснение к каждой серии (график)
* Серии — это функции, Y-координаты
* Точки — это аргументы функций, X-координаты

>В диаграммах также допускается выбирать только *поля ресурсов*

### Условное оформление

Условное оформление по умолчанию наследуется от родительского элемента всеми дочерними элементами



#1С #1С/Конфигурация #1С/Конфигурация/Макеты #1С/СКД