
СКД выполняет различные оптимизации для ускорения работы и экономии памяти

СКД генерирует внутренний запрос на основе всех наборов данных и выполняет оптимизации. Внутренний запрос к БД можно увидеть в разметке XML файла СКД

* Неиспользуемые поля запроса удаляются из итогового запроса
* Обрещение к вложенным элементам объектов (реквизиты, табличные части, ссылки вложенные друг в друга) не замедляет выполнение запроса к БД
* При использовании дополнительных полей в НКД (условное оформление, отбор и т. д.), они добавляются в итоговый запрос, даже если они отсутствуют во всех созданных наборах данных.

**Вложенные запросы**

Вложенные запросы не оптимизируются по умолчанию. Для оптимизации вложенных запросов, нужно:

* Открыть конструктор запросов **вложенного запроса**
* Перейти к вкладке Компоновка
* Перейти к вложенной вкладке Поля
* Выбрать все поля запроса

Эти действия позволят явно указать СКД на существование полей в подзапросе, которые можно оптимизировать

**Неявное соединение объекта с самим собой**

Допустим у нас есть Документ `Договор`, а в `Договоре` есть реквизит со ссылкой на документ основания `Основание`. У основания, как документа, есть свои реквизиты: `Дата`, `Номер` и, в том числе, `Ссылка`.

Если в запросе обращаться к основанию Договора через реквизит `Документ.Договор.Основание.Ссылка`, то будет **неявно сгенерированно левое соединение** документа ~`Основание` с самим собой по этой ссылке.

Чтобы избежать такого поведения, нужно обращаться не к реквизиту
`Документ.Договор.Основание.Ссылка`, а к реквизиту
`Документ.Договор.Основание`

#1С #1С/Конфигурация #1С/Конфигурация/Макеты #1С/СКД #Performance