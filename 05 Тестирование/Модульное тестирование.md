
Свойства хорошего unit-теста:
1. Автоматизированный
2. Повторяемый
3. Простой в реализации
4. Unit-тесты должны быть доступны всем разработчикам проекта
5. Должен выполняться быстро

>Тестирование должно выполняться для одного элемента за раз

Например, если нужно обратиться к БД для тестирования метода, то тестирование такого метода уже нельзя рассматривать как модульное. Это интеграционное тестирование, так как в данном случае рассматривается взаимодействие с базой данных.

#### Расположение тестов

* Тесты должны быть частью системы контроля версий
* Тесты должны находиться в отдельном проекте (например `MyProject.Tests`) или, хотя бы, в отдельной папке
* Если приложение состоит из обособленных компонентов, то стоит размещать тесты с этими компонентами в отдельных папках или сборках

### Именование классов и методов

1. Class: MyClassTests
2. Method: MyMethodTests

Распространенный шаблон именования:
```
<тестируемый метод>_<сценарий>_<ожидаемый результат>
```
Сценарий — параметры сущности

>Каждый тестирующий класс должен тестировать одну сущность

Unit-тесты создавать нужно | Unit-тесты создавать не стоит
-|-
Сложный код без зависимостей (запутанная логика или сложные алгоритмы) | Простой код без зависимостей
Не очень сложный код с зависимостями | Сложный код с множеством зависимостей

В случае сложного кода с множеством зависимостей, возможно, стоит провести рефакторинг или использовать ***приемочные тесты*** (интеграционные).

Существует несколько фреймворков для Unit-тестирования:
* NUnit
* xUnit.net
* MS Test 

Переход из одного фреймворка в другой не составляет труда.

## Создание Unit-тестов в Visual Studio с помощью фреймворка MSTest

Все Unit-тесты следует определять в отдельном проекте `"MyProject.Test"`. Проект должен быть типа "MS Test Project".

Каждый тестирующий класс помечается атрибутом `[TestClass]`
Каждый тестирующий метод помечается атрибутом `[TestMethod]`
Данные атрибуты находятся в библиотеке от Visual Studio (`Microsoft.VisualStudio.TestTools.UnitTesting`)

Для получения доступа к коду для тестирования, необходимо добавить ссылку на сборку с тестируемым проектом.

В Unit-тестировании используется шаблон **AAA** (Arrange, Act, Assert). Тестируемый код разделяется на 3 блока:
* блок **arrange** (выстраивание, подготовка): создание переменных для тестирования
* блок **act**: выполнение действий над тестируемым кодом
* блок **assert**: проверка успешности теста

### Пример

Пусть есть тестируемый метод, определенный в некотором классе:

```csharp
// ..class

public static int Sum(int x, int y){
	return x + y;
}
```

Для него определен тестирующий метод:

```csharp
// ..test class

public void Sum_10and20_30returned(){
	// arrange (выстраивание, подготовка)
	int x = 10, y = 20;
	int expected = 30;
	
	// act (вызов тестируемого кода)
	MyTestibleClass mtc = new();
	int actual = mtc.Sum(x, y);
	
	// assert (утверждение)
	Assert.AreEqual(expected, actual);
}
```

* Название метода должно описывать, что тестируется в прогаммном модуле. Если название метода трудно определить, то, возможно, тестирующий метод неправильно проектируется. Не стоит охватывать слишком много сущностей кода в одном unit-тесте.

### Альтернативный способ тестирвоания

Для любого метода и класса можно создать unit-тест из контекстного меню. В таком случае откроется окно создания unit-теста, где можно указать сборку, в которой тест будет создан, правила именования, код генерируемый по умолчанию и др.

Далее: https://www.youtube.com/watch?v=HyxbHcWtvfk&list=PLvItDmb0sZw-dolIJ9mSNolTvW7CnQlSG&index=5&ab_channel=ITVDN

#Testing #Testing/Unit_testing