>Нормализация — это процесс удаления избыточных данных.

>С точки зрения проектирования, нормализация — это метод проектирования БД, который позволяет привести эту БД к минимальной избыточности.

Избыточность — хранение одних и тех же данных в нескольких местах одновременно. Избыточность может приводить к аномалиям.

#### Пример аномалии:
Допустим в таблице "Мебель" есть записи о различных стульях, столах и т. д. Есть колонка "Материал". Для некоторых предметов указан материал "дерево", но в процессе использования БД захотели разделить "дерево" на "натуральное дерево" и "искуственное дерево". При изменении записей могут возникнуть аномалии, например, не все поля со значением "дерево" были обновлены, тогда будет существовать как просто "дерево", так и "натуральое дерево" или "искусственное дерево".

## Зачем нужна нормализация базы данных?

* Для предотвращения возможных аномалий в БД
* Для повышения производительности
* Для гибкого и удобного манипулирования данными

## Нормальная форма

>Нормальная форма базы данных — это набор правил и критериев, которым должна отвечать БД.

>Процесс нормализации — это последовательный процесс приведения БД к эталонному виду, путем перехода от одной нормальной формы к следующей.

Выделяют 5 основных нормальных форм (1NF, 2NF, ... 5NF).
База данных считается нормализованной, если она имеет хотя бы 3-ю нормальную форму.

Полная классификация нормальных форм от ненормализованной БД к более нормализованной:
1) Ненормализованная форма (нулевая) (UNF)
2) 1NF
3) 2NF
4) 3NF
5) Нормальная форма Бойса-Кодда (BCNF)
6) 4NF
7) 5NF
8) Доменно-ключевая НФ (DKNF)
9) Шестая нормальная форма (6NF)

Зачастую базу данных приводят только к 3-ей нормальной форме. При этом исправляется большинство аномалий и не теряется удобство пользования базой данных.
Нормальные формы после 4-й используются очень редко или чисто в теории, так как повышение производительности останавливается на 3-й форме. При повышении нормализованности дальше производительность и удобство использования будут значительно страдать.

Каждая последующая НФ требует, чтобы база данных удовлетворяла требованиям предыдущей НФ.

## Процесс нормализации
Чтобы приступить к нормализации БД, нужно, сначала, привести ее к табличному виду так, чтобы база соответствовала базовым принципам реляционной теории. Строки не должны быть пронумерованы, порядок строк и столбцов не важен. (UNF)

### 1NF:
* В таблице не должно быть дублирующих строк
* Каждая ячейка таблицы должна хранить атомарное значение
* В столбце хранятся данные одного типа
* Отсутствуют массивы и списки в любом виде (внутри полей)

>Кратко: в ячейках атомарные значения и нет строк-дубликатов.

![[БД_НФ_1.png]]

### 2NF:
* Выполнение требований 1NF
* Таблица должна иметь ключ
* Значения неключевых атрибутов можно определить только зная весь составной первичный ключ (если он составной). Другими словами все значения неключевых атрибутов должны находится в неприводимой функциональной зависимости от первичного ключа. Неприводимость означает, что нельзя установить зависимость от меньшего числа атрибутов ключа (то есть упростить зависимость).

>Кратко: таблицы должны иметь ключи, неключевые атрибуты должны быть неприводимо функционально зависимы от первичного ключа.

Декомпозиция — это разбиение одного отношения (таблицы) на несколько.

### 3NF:
* Выполнение требований 2NF
* В таблицах должна отсутствовать транзитивная зависимость

Другими словами все неключевые атрибуты должны быть зависимы напрямую и только от ~первичного ключа.

>Транзитивная зависимость — это зависимость неключевых столбцов от других неключевых столбцов.

Если неключевых столбцов нет, то условие автоматически считается выполненным

Ниже приведена таблица в 2NF с наличием транзитивной зависимости:
"Описание" подразделения напрямую зависит от "Поразделения" и косвенно от ключа.
![[БД_НФ_05.png]]
Приведение к 3NF при помощи декомпозиции:
![[БД_НФ_04.png]]
### BCNF:
* Выполнение требований 3NF
* Каждый компонент составного ключа не должен зависеть от неключевых атрибутов.
Если ключ является простым, то таблицы автоматически считаются приведенными к BCNF.

В следующей таблице существует зависимость части составного ключа "Проект-Направление", а именно, "Направление" от колонки "Куратор"
![[БД_НФ_03.png]]
С помощью декомпозиции, выделения зависимости в отдельную таблицу получаем таблицы:
![[БД_НФ_2.png]]
[Вы остановились здесь 20:00](https://www.youtube.com/watch?v=zqQxWdTpSIA)
[И здесь](https://habr.com/ru/post/254773/)
### 4NF
* Выполнение 3NF
* Должны отсутствовать нетревиальные многозначные зависимости

#DB